<html>
	<head>
		<title>
			Wcl documentation
		</title>
		<style>
body {
        font-size: 14px;
        font-family: arial, Helvetica;
}

h1 { font-size: 25px; }
h2 { font-size: 20px; }

a[href] {
	border-bottom: 1px dotted grey;
	text-decoration: none
}

.doc_paragraph
{
        font-size: 14px;
        font-family: arial, helvetica;
}

.item_header { font-size: 10px; page-break-before: avoid; page-break-inside: avoid; page-break-after: avoid }

.item_index {
		white-space: pre;
        font-size: 11px;
        font-family: monaco, courier, mono-space;
}

.table_code {
		margin: 10px auto;
}

.doc_code {
		padding-top: .1em;
		padding-bottom: .5em;
		background-color: #EEE;
		border: #AAA solid 1px;
        font-size: 11px;
        font-family: monaco, courier, mono-space;
}

.opt_usage {
		margin-left: 1em;
		margin-right: 1em;
		padding: .2em;
		background-color: #EEE;
		border: #AAA solid 1px;
        font-family: monaco, courier, mono-space;
	
}

</style>
		<link rel="stylesheet" type="text/css" href="doc.css" media="all">
	</head>
	<body>
	<h1>Wcl v1.0.0  documentation</h1><p><i>Documentation generated by XL CLAIRE v3.3.37 at Sat, 25 Nov 2006</i></p><ul>
				<li><b>Author :</b> Sylvain BENILAN</li>
						</ul>
				<h1><a name='__category_index__'>Category index</a></h1>
		<ol><li><a href='#1082575057'>mod_wcl Apache 2.x module configuration</a></li>
			<li><a href='#1082608449'>HTTP headers</a></li>
			<li><a href='#1082697809'>Misceleanous</a></li>
			<li><a href='#1082698113'>Subscripts</a></li>
			<li><a href='#1082766849'>Session</a></li>
			</ol>
		<h1><a name='__option_index__'>Command line option index</a></h1>
		<ol>
		<li><a href='#1082853969'>Wcl srcipt</a> : <font color=blue>-wcl</font>&nbsp;[<font color=green>&lt;file&gt;</font>]</li>
			<li><a href='#1082854305'>Wcl script</a> : {<font color=blue>-xwcl</font>&nbsp;|&nbsp;<font color=blue>-xwcl</font><font color=green>&lt;S&gt;</font><font color=blue>-</font><font color=green>&lt;W&gt;</font>}&nbsp;<font color=green>&lt;file&gt;</font></li>
			</ol>
		<h1><a name='__method_index__'>Method index</a></h1>
		<ul><li><font font-face='Courier' class='item_index'><a href='#1082697793'>die</a>()<font color='blue'> -&gt; </font>void</font></li>
			<li><font font-face='Courier' class='item_index'><a href='#1082608545'>force_content_length</a>()<font color='blue'> -&gt; </font>void</font></li>
			<li><font font-face='Courier' class='item_index'><a href='#1082575921'>header</a>(<font color='green'>h</font><font color='blue'>:</font>string)<font color='blue'> -&gt; </font>void</font></li>
			<li><font font-face='Courier' class='item_index'><a href='#1082697841'>include</a>(<font color='green'>self</font><font color='blue'>:</font>string)<font color='blue'> -&gt; </font>void</font></li>
			<li><font font-face='Courier' class='item_index'><a href='#1082853569'>register</a>(<font color='green'>varname</font><font color='blue'>:</font>string, <font color='green'>val</font><font color='blue'>:</font>any)<font color='blue'> -&gt; </font>any</font></li>
			<li><font font-face='Courier' class='item_index'><a href='#1082853665'>rregister</a>(<font color='green'>varname</font><font color='blue'>:</font>string, <font color='green'>val</font><font color='blue'>:</font>any)<font color='blue'> -&gt; </font>any</font></li>
			<li><font font-face='Courier' class='item_index'><a href='#1082853393'>session_clean_but</a>(<font color='green'>i</font><font color='blue'>:</font>string)<font color='blue'> -&gt; </font>any</font></li>
			<li><font font-face='Courier' class='item_index'><a href='#1082853265'>session_clean_but</a>(<font color='green'>l</font><font color='blue'>:</font>bag)<font color='blue'> -&gt; </font>any</font></li>
			<li><font font-face='Courier' class='item_index'><a href='#1082852433'>session_cookie</a>()<font color='blue'> =&gt; </font>void</font></li>
			<li><font font-face='Courier' class='item_index'><a href='#1082852913'>session_destroy</a>()<font color='blue'> -&gt; </font>void</font></li>
			<li><font font-face='Courier' class='item_index'><a href='#1082773281'>session_url</a>()<font color='blue'> -&gt; </font>void</font></li>
			<li><font font-face='Courier' class='item_index'><a href='#1082853921'>unregister</a>(<font color='green'>self</font><font color='blue'>:</font>string)<font color='blue'> -&gt; </font>void</font></li>
			</ul>
		<hr style='page-break-before: always; page-break-after: avoid' />
			<h1>Wcl categories</h1>
		<a name='1082575057'><hr style='page-break-before: always' /></a>
		<table width='100%' class='item_header'>
		<tr>
			<td width='33%' align='left' valign='bottom'><i></i></td>
			<td width='33%' align='center' valign='top'><i><a href='#__category_index__'>categories</a><br/>mod_wcl Apache 2.x module configuration
				</i></td>
			<td width='33%' align='right' valign='bottom'><i></i></td>
		</tr>
	</table>
	<h2>mod_wcl Apache 2.x module configuration</h2>
	<ul></ul><p align='justify' class='doc_paragraph'> Communications between the Apache 2.x web server and a Web CLAIRE
 agent goes through the mod_wcl Apache 2.x module that requires
 to be configured in the Apache configuration syntax. The mod_wcl
 module understands a set of directives used to configure one or
 multiple Web CLAIRE services. mod_wcl supports per-directory
 configurations, also it's a good habbit to define a Web CLAIRE
 service inside a location block, for instance if we have a single
 service we may define our mod_wcl directives in a location block
 bound to the root path of the server&nbsp;:
 <table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'>&nbsp;&lt;<font color='#666633'>location</font>&nbsp;/&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color='black'>mod_wcl</font>&nbsp;<font color='black'>directives</font>&nbsp;<font color=blue>.</font><font color=blue>.</font><font color=blue>.</font><br/>&nbsp;&lt;/<font color='#666633'>location</font>&gt;</td></tr></table> The minimal configuration consists in two directives, first we need the
 WclCommand directive that specifies the path of the binary executable
 of our service including command line options, this binary have to be compiled
 with the module Wcl which, in order to behave as expected, should be launched with
 the <a href='#1082853969'><font color='#'>-wcl</font></a> option,
 on the other hand we have to specify a (wildcard) filter for the set of files
 that are handled by our service (usualy *.wcl that specifies that we handle
 all files with extension wcl)&nbsp;:
 <table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'>&nbsp;&lt;<font color='#666633'>location</font>&nbsp;/&gt;<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color='black'>WclCommand</font>&nbsp;/<font color='black'>path</font>/<font color='#666633'>of</font>/<font color='#666633'>the</font>/<font color='black'>binary</font>&nbsp;<a href='#1082853969'><font color='#'>-wcl</font></a><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color='black'>WclFileFilter</font>&nbsp;<font color='#666633'>*</font><font color=blue>.</font><font color='black'>wcl</font><br/>&nbsp;&lt;/<font color='#666633'>location</font>&gt;</td></tr></table> The file filter is necessary since mod_wcl is declared as a 'really first'
 apache module. Such modules have an opportunity to perform task
 as soon as a request is handled by apache. This is a requirement for our
 architecture because we have to properly handle <a href='#1082766849'><font color='#'>session</font></a> ID that we appear
 on the URL when <a href='#1082773281'><font color='#'>session_url</font></a> is used, the <a href='#1082766849'><font color='#'>session</font></a> ID have to
 be removed from the request URI in an early step such, for instance, images
 can be handled normaly by apache.</p><p align='justify' class='doc_paragraph'> Then we may define some user environment variables with the following
 directive&nbsp;:
 <table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'>&nbsp;<font color='black'>WclUserEnv</font>&nbsp;<font color='black'>ENV_VAR_NAME</font>&nbsp;<font color='black'>env_var_value</font></td></tr></table> These environment variables will be added to the CGI (like) environment in which
 the service is launched (they will be available from the service via
 getenv("ENV_VAR_NAME")).</p><p align='justify' class='doc_paragraph'> We may also specify the name of a file that is taken a the default one when
 none are specified, this is done with the WclDefaultIndex directive. It allows
 the generation of an index page in a dynamic flavor without the need of an existing file&nbsp;:
 <table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'>&nbsp;<font color='black'>WclDefaultIndex</font>&nbsp;<font color='black'>name_of_default_index</font></td></tr></table> mod_wcl will set the request URI to this file if none is actualy requested.
 For instance, the default Web CLAIRE configuration installed by the
 webclaire package specifies 'inspect.wcl' as the default index. Notice that such handling
 can only be made by a compiled handler.</p><p align='justify' class='doc_paragraph'> When we use sessions from our service (that is our service calls <a href='#1082773281'><font color='#'>session_url</font></a> or
 <a href='#1082852433'><font color='#'>session_cookie</font></a>) we have to specify a directory where
 <a href='#1082766849'><font color='#'>session</font></a> files are saved, optionaly we can specify a <a href='#1082766849'><font color='#'>session</font></a> name that will be used
 to generate the <a href='#1082766849'><font color='#'>session</font></a> file name&nbsp;:
 <table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'>&nbsp;<font color='black'>WclSessionName</font>&nbsp;<font color='black'>NAME_OF_THE_SESSION</font><br/>&nbsp;<font color='black'>WclSessionPath</font>&nbsp;/<font color='black'>path</font>/<font color='black'>to</font>/<font color='black'>session_folder</font></td></tr></table> We may also specify a path where trace lines resulting of a script execution are saved
 (each request appends its trace to the file)&nbsp;:
 <table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'>&nbsp;<font color='black'>WclTraceFile</font>&nbsp;/<font color='black'>path</font>/<font color='black'>to</font>/<font color='#666633'>trace_file</font></td></tr></table> Last some configuration paths can be specifies using environment variables that when used
 will be substituted by the environment variable value. The substitution environment includes
 variables defined with WlcUserEnv directive. The paths that are subject to subtitution are&nbsp;:
 <ul> <li>WclCommand
 <li>WclSessionPath
 <li>WclTraceFile
 <li>WclUploadPath
 </ul> For instance the following configuration is valid&nbsp;:
 <table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'>&nbsp;<font color='black'>WclUserEnv</font>&nbsp;<font color='black'>HOME_DIR</font>&nbsp;/<font color='black'>path</font>/<font color='black'>to</font>/<font color='black'>custom</font>/<font color='black'>root_folder</font><br/>&nbsp;<font color='black'>WclUserEnv</font>&nbsp;<font color='black'>SERVICE_BINARY</font>&nbsp;<font color='black'>the_name_of_my_binary</font><br/>&nbsp;<font color='black'>WclCommand</font>&nbsp;<font color='black'>$</font>(<font color='black'>HOME_DIR</font>)/<font color='black'>path</font>/<font color='black'>to</font>/<font color='black'>$</font>(<font color='black'>SERVICE_BINARY</font>)</td></tr></table> For instance, it would be verry kind if we could have a per-client trace file. Such a
 configuration is possible using environment subtitution as in&nbsp;:
 <table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'>&nbsp;<font color='black'>WclTraceFile</font>&nbsp;/<font color='black'>path</font>/<font color='black'>to</font>/<font color='black'>trace_folder</font>/<font color='black'>$</font>(<font color='black'>REMOTE_ADDR</font>)<font color=blue>.</font><b><font color='#0000CC'>trace</font></b></td></tr></table></p><a name='1082608449'><hr style='page-break-before: always' /></a>
		<table width='100%' class='item_header'>
		<tr>
			<td width='33%' align='left' valign='bottom'><i></i></td>
			<td width='33%' align='center' valign='top'><i><a href='#__category_index__'>categories</a><br/>HTTP headers
				</i></td>
			<td width='33%' align='right' valign='bottom'><i></i></td>
		</tr>
	</table>
	<h2>HTTP headers</h2>
	<ul><li><font font-face='Courier' class='item_index'><a href='#1082608545'>force_content_length</a>()<font color='blue'> -&gt; </font>void</font></li><li><font font-face='Courier' class='item_index'><a href='#1082575921'>header</a>(<font color='green'>h</font><font color='blue'>:</font>string)<font color='blue'> -&gt; </font>void</font></li></ul><p align='justify' class='doc_paragraph'></p><a name='1082697809'><hr style='page-break-before: always' /></a>
		<table width='100%' class='item_header'>
		<tr>
			<td width='33%' align='left' valign='bottom'><i></i></td>
			<td width='33%' align='center' valign='top'><i><a href='#__category_index__'>categories</a><br/>Misceleanous
				</i></td>
			<td width='33%' align='right' valign='bottom'><i></i></td>
		</tr>
	</table>
	<h2>Misceleanous</h2>
	<ul><li><font font-face='Courier' class='item_index'><a href='#1082697793'>die</a>()<font color='blue'> -&gt; </font>void</font></li></ul><p align='justify' class='doc_paragraph'></p><a name='1082698113'><hr style='page-break-before: always' /></a>
		<table width='100%' class='item_header'>
		<tr>
			<td width='33%' align='left' valign='bottom'><i></i></td>
			<td width='33%' align='center' valign='top'><i><a href='#__category_index__'>categories</a><br/>Subscripts
				</i></td>
			<td width='33%' align='right' valign='bottom'><i></i></td>
		</tr>
	</table>
	<h2>Subscripts</h2>
	<ul><li><font font-face='Courier' class='item_index'><a href='#1082697841'>include</a>(<font color='green'>self</font><font color='blue'>:</font>string)<font color='blue'> -&gt; </font>void</font></li></ul><p align='justify' class='doc_paragraph'></p><a name='1082766849'><hr style='page-break-before: always' /></a>
		<table width='100%' class='item_header'>
		<tr>
			<td width='33%' align='left' valign='bottom'><i></i></td>
			<td width='33%' align='center' valign='top'><i><a href='#__category_index__'>categories</a><br/>Session
				</i></td>
			<td width='33%' align='right' valign='bottom'><i></i></td>
		</tr>
	</table>
	<h2>Session</h2>
	<ul><li><font font-face='Courier' class='item_index'><a href='#1082853569'>register</a>(<font color='green'>varname</font><font color='blue'>:</font>string, <font color='green'>val</font><font color='blue'>:</font>any)<font color='blue'> -&gt; </font>any</font></li><li><font font-face='Courier' class='item_index'><a href='#1082853665'>rregister</a>(<font color='green'>varname</font><font color='blue'>:</font>string, <font color='green'>val</font><font color='blue'>:</font>any)<font color='blue'> -&gt; </font>any</font></li><li><font font-face='Courier' class='item_index'><a href='#1082853265'>session_clean_but</a>(<font color='green'>l</font><font color='blue'>:</font>bag)<font color='blue'> -&gt; </font>any</font></li><li><font font-face='Courier' class='item_index'><a href='#1082853393'>session_clean_but</a>(<font color='green'>i</font><font color='blue'>:</font>string)<font color='blue'> -&gt; </font>any</font></li><li><font font-face='Courier' class='item_index'><a href='#1082852433'>session_cookie</a>()<font color='blue'> =&gt; </font>void</font></li><li><font font-face='Courier' class='item_index'><a href='#1082852913'>session_destroy</a>()<font color='blue'> -&gt; </font>void</font></li><li><font font-face='Courier' class='item_index'><a href='#1082773281'>session_url</a>()<font color='blue'> -&gt; </font>void</font></li><li><font font-face='Courier' class='item_index'><a href='#1082853921'>unregister</a>(<font color='green'>self</font><font color='blue'>:</font>string)<font color='blue'> -&gt; </font>void</font></li></ul><p align='justify' class='doc_paragraph'> Due to the architecture of client/server application we need a way to
 store server-side temporary datas between two client requests.
 These temporary datas are called <a href='#1082766849'><font color='#'>session</font></a> datas and are saved in a server
 side file between requests.
 A client is identified by a <a href='#1082766849'><font color='#'>session</font></a> ID that is transmited between the
 server and the client in each request.
 Wcl comes with two strategies for the ID transmition&nbsp;:
 <ul> <li>In an HTTP cookie by <a href='#1082852433'><font color='#'>session_cookie</font></a>().
 <li>Directly on the URL by <a href='#1082773281'><font color='#'>session_url</font></a>().
 </ul> <a href='#1082852433'><font color='#'>session_cookie</font></a>() or <a href='#1082773281'><font color='#'>session_url</font></a>() would either load an existing <a href='#1082766849'><font color='#'>session</font></a>
 or, if none exists at the time of the call, create a new <a href='#1082766849'><font color='#'>session</font></a> with a new
 <a href='#1082766849'><font color='#'>session</font></a> ID. Using cookie require that the client browser supports and allows
 cookies. URL sessions are smarter since they don't need configuration of the
 client broswer at all.
 Notice that a <a href='#1082766849'><font color='#'>session</font></a> should be started before actualy sending data an error would
 be raised othewise.</p><p align='justify' class='doc_paragraph'> Once a <a href='#1082766849'><font color='#'>session</font></a> is started we may add new entries in the <a href='#1082766849'><font color='#'>session</font></a>. Entries are
 identified by a variable name (string) and may hold any object, the <a href='#1082853569'><font color='#'>register</font></a>
 <a href='#1082853569'><font color='#'>register</font></a> method would insert a new entry in the <a href='#1082766849'><font color='#'>session</font></a>, for instance&nbsp;:
 <table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'>&nbsp;<a href='#1082853569'><font color='#666633'>register</font></a>(<font color='#993333'>"counter"</font>,&nbsp;<font color='black'>0</font>)</td></tr></table> Once a variable has been registered it comes accessible through the $ table&nbsp;:
 <table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'>&nbsp;(<b><font color='#0000CC'>assert</font></b>(<font color='black'>$</font>[<font color='#993333'>"counter"</font>]&nbsp;<font color='#666633'>=</font>&nbsp;<font color='black'>0</font>))</td></tr></table> When the executed script ends the <a href='#1082766849'><font color='#'>session</font></a> (all registered objects) is automaticaly
 saved in the <a href='#1082766849'><font color='#'>session</font></a> file. This operation relies on the serialize facility.
 Sometimes we need to <a href='#1082853569'><font color='#'>register</font></a> an object and also the relations of that object that
 are themself objects (i.e. not primitive or bag), we call that recursive registering
 and we would use <a href='#1082853665'><font color='#'>rregister</font></a>. For instance let's consider the following script that
 manage a simple fruit's basket&nbsp;:
 <table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'>&nbsp;<font color='black'>item</font>&nbsp;<font color='#0000CC'>&lt;:</font>&nbsp;<font color='#339966'>ephemeral_object</font>(<font color='#666633'>name</font><font color=blue>:</font><font color='#339966'>string</font>,&nbsp;<font color='black'>quantity</font><font color=blue>:</font><font color='#339966'>integer</font>)<br/>&nbsp;<font color='black'>basket</font>&nbsp;<font color='#0000CC'>&lt;:</font>&nbsp;<font color='#339966'>ephemeral_object</font>(<font color='black'>items</font><font color=blue>:</font><font color='#339966'>list</font>[<font color='black'>item</font>])<br/><br/>&nbsp;(<b><font color='#0000CC'>if</font></b>&nbsp;(<font color='black'>$</font>[<font color='#993333'>"add_item"</font>]&nbsp;<font color='#666633'>&amp;</font>&nbsp;<font color='black'>$</font>[<font color='#993333'>"basket"</font>])<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color='black'>$</font>[<font color='#993333'>"basket"</font>]<font color=blue>.</font><font color='black'>items</font>&nbsp;<font color='#666633'>add</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color='black'>item</font>(<font color='#666633'>name</font>&nbsp;<font color='#666633'>=</font>&nbsp;<font color='black'>$</font>[<font color='#993333'>"name"</font>],<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color='black'>quantity</font>&nbsp;<font color='#666633'>=</font>&nbsp;<font color='#666633'>integer!</font>(<font color='black'>$</font>[<font color='#993333'>"quantity"</font>])))<br/><br/>&nbsp;(<a href='#1082773281'><font color='#666633'>session_url</font></a>())&nbsp;<font color='#FF9900'>// starts a session</font><br/><br/>&nbsp;(<b><font color='#0000CC'>if</font></b>&nbsp;<font color='#666633'>not</font>(<font color='black'>$</font>[<font color='#993333'>"basket"</font>])&nbsp;<font color='#FF9900'>// register a new basket</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#1082853665'><font color='#666633'>rregister</font></a>(<font color='#993333'>"basket"</font>,&nbsp;<font color='black'>basket</font>()))<br/><br/>&nbsp;<font color='#0000CC'><b>?&gt;</b></font><font color='#777777'>Your basket :<br>

 &lt;table&gt;</font><font color='#0000CC'><b>&lt;?</b><br></font>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><font color='#0000CC'>for</font></b>&nbsp;<font color='black'>i</font>&nbsp;<b><font color='#0000CC'>in</font></b>&nbsp;<font color='black'>$</font>[<font color='#993333'>"basket"</font>]<font color=blue>.</font><font color='black'>items</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&nbsp;<font color='#0000CC'><b>?&gt;</b></font><font color='#777777'>&lt;tr&gt;&lt;td&gt;</font><font color='#0000CC'><b>&lt;?</b>==</font>&nbsp;<font color='black'>i</font><font color=blue>.</font><font color='black'>quantity</font>&nbsp;<font color='#0000CC'><b>?&gt;</b></font><font color='#777777'> </font><font color='#0000CC'><b>&lt;?</b>==</font>&nbsp;<font color='black'>i</font><font color=blue>.</font><font color='#666633'>name</font>)<br/>&nbsp;<font color='#0000CC'><b>?&gt;</b></font><font color='#777777'>&lt;/table&gt;</font><font color='#0000CC'><b>&lt;?</b><br></font><br/>&nbsp;<font color='#0000CC'><b>?&gt;</b></font><font color='#777777'>Add item to your basket :<br>

 &lt;form&gt;<br>

     &lt;select name=&#39;name&#39;&gt;<br>

         &lt;option value=&#39;banana&#39;&gt;banana<br>

         &lt;option value=&#39;orange&#39;&gt;orange<br>

     &lt;/select&gt;<br>

     &lt;input type=text name=&#39;quantity&#39;&gt;<br>

     &lt;input type=submit name=&#39;add_item&#39;&gt;<br>

 &lt;/form&gt;</font><font color='#0000CC'><b>&lt;?</b><br></font></td></tr></table> If we had use a simple <a href='#1082853569'><font color='#'>register</font></a>, the items added to the basket would not have been
 inserted in the <a href='#1082766849'><font color='#'>session</font></a> whereas the use of <a href='#1082853665'><font color='#'>rregister</font></a> tells to recurse the item objects.</p><p align='justify' class='doc_paragraph'> At the time a <a href='#1082766849'><font color='#'>session</font></a> is saved the <a href='#1082766849'><font color='#'>session</font></a> file is locked to avoid multiple write
 access so that, for instance, a page that defines multiple frames for a single <a href='#1082766849'><font color='#'>session</font></a>
 does not alter the <a href='#1082766849'><font color='#'>session</font></a> file.</p><hr style='page-break-before: always; page-break-after: avoid' />
			<h1>Wcl command line options</h1>
		<a name='1082853969'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header' >
		<tr>
			<td width='33%' align='left'><i><a href='#__option_index__'>option index</a></i></td>
			<td width='33%' align='center'>Wcl srcipt</td>
			<td width='33%' align='right'><i>Wcl command line option</i></td>
		</tr>
	</table><h3 class='opt_usage'><font color=blue>-wcl</font>&nbsp;[<font color=green>&lt;file&gt;</font>]</h3><h4>Where</h4><ul><li><font color='green'><b>file</b></font> belongs to path</li></ul><p align='justify' class='doc_paragraph'>Load the requested wcl <b>file</b>. One may test a single wcl <b>file</b> by specifying a &lt;<b>file</b>&gt; argument unless PATH_TRANSLATED is defined in the environment. In the later case a CGI environment is assumed as built by the mod_wcl Apache 2.x module.</p><a name='1082854305'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header' >
		<tr>
			<td width='33%' align='left'><i><a href='#__option_index__'>option index</a></i></td>
			<td width='33%' align='center'>Wcl script</td>
			<td width='33%' align='right'><i>Wcl command line option</i></td>
		</tr>
	</table><h3 class='opt_usage'>{<font color=blue>-xwcl</font>&nbsp;|&nbsp;<font color=blue>-xwcl</font><font color=green>&lt;S&gt;</font><font color=blue>-</font><font color=green>&lt;W&gt;</font>}&nbsp;<font color=green>&lt;file&gt;</font></h3><h4>Where</h4><ul><li><font color='green'><b>S</b></font> belongs to (0 .. 9)</li><li><font color='green'><b>W</b></font> belongs to (0 .. 9)</li><li><font color='green'><b>file</b></font> belongs to path</li></ul><p align='justify' class='doc_paragraph'>Load the wcl script &lt;<b>file</b>&gt;. A (unix) <b>file</b> may have execution rights and one can make a wcl script by adding as the first line of the script something like&nbsp;:</p><p align='justify' class='doc_paragraph'>  #!/usr/local/bin/claire -xwcl</p><p align='justify' class='doc_paragraph'>When &lt;<b>S</b>&gt; and &lt;<b>W</b>&gt; are specified they are used to inititalize CLAIRE memory (see option -s).</p><hr style='page-break-before: always; page-break-after: avoid' />
			<h1>Wcl methods</h1>
		<a name='1082697793'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082697809'>Misceleanous</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Wcl method</i></td>
	</tr></table><h3>die()<font color='blue'> -&gt; </font>void</h3><p align='justify' class='doc_paragraph'> die() properly aborts the execution of the script and exits. If a <a href='#1082766849'><font color='#'>session</font></a>
 has been started and no error where issued by the script then the <a href='#1082766849'><font color='#'>session</font></a>
 is saved.</p><a name='1082608545'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082608449'>HTTP headers</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Http method</i></td>
	</tr></table><h3>force_content_length()<font color='blue'> -&gt; </font>void</h3><p align='justify' class='doc_paragraph'> force_content_length() forces the response to contain a Content-Length
 HTTP <a href='#1082575921'><font color='#'>header</font></a>. The default for HTTP/1.1 client is to transfer the response
 by chunks (chunked coding transfer). This would be necessary for instance
 when sending an application/pdf content type response to a Win32 client that uses
 Internet Explorer, this browser has difficulties to transmit a chunked encoded
 response to the Adobe Acrobat plugin...</p><a name='1082575921'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082608449'>HTTP headers</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Http method</i></td>
	</tr></table><h3>header(<font color='green'>h</font><font color='blue'>:</font>string)<font color='blue'> -&gt; </font>void</h3><p align='justify' class='doc_paragraph'> header(<b>h</b>) adds a custom HTTP header to the response. The specified header
 <b>h</b> should be a single line header without terminating CRLF. For instances&nbsp;:
 <table class='table_code' align=center border=0 width='85%'>
										<tr><td class='doc_code'>&nbsp;<font color='#666633'>header</font>(<font color='#993333'>"Some-Header: header-value"</font>)</td></tr></table></p><a name='1082697841'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082698113'>Subscripts</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Wcl method</i></td>
	</tr></table><h3>include(<font color='green'>self</font><font color='blue'>:</font>string)<font color='blue'> -&gt; </font>void</h3><p align='justify' class='doc_paragraph'> include(<b>self</b>) is the generic way (instead of calling load_wcl) to load
 sub-scripts. <b>self</b> is the path of the loaded subscript it is relative
 to the path of the main script.</p><a name='1082853569'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082766849'>Session</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Reader method</i></td>
	</tr></table><h3>register(<font color='green'>varname</font><font color='blue'>:</font>string, <font color='green'>val</font><font color='blue'>:</font>any)<font color='blue'> -&gt; </font>any</h3><p align='justify' class='doc_paragraph'> register(<b>varname</b>, <b>val</b>) adds a new entry in the current <a href='#1082766849'><font color='#'>session</font></a>. After this call
 we have $[<b>varname</b>] = <b>val</b>.</p><a name='1082853665'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082766849'>Session</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Wcl method</i></td>
	</tr></table><h3>rregister(<font color='green'>varname</font><font color='blue'>:</font>string, <font color='green'>val</font><font color='blue'>:</font>any)<font color='blue'> -&gt; </font>any</h3><p align='justify' class='doc_paragraph'> rregister(<b>varname</b>, <b>val</b>) adds a new entry in the current <a href='#1082766849'><font color='#'>session</font></a>. After this call
 we have $[<b>varname</b>] = <b>val</b>. rregister stands for 'recursive <a href='#1082853569'><font color='#'>register</font></a>' which means
 that the related objects are also registered (see serialize).</p><a name='1082853265'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082766849'>Session</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Wcl method</i></td>
	</tr></table><h3>session_clean_but(<font color='green'>l</font><font color='blue'>:</font>bag)<font color='blue'> -&gt; </font>any</h3><p align='justify' class='doc_paragraph'> session_clean_but(<b>l</b>) removes all datas from a <a href='#1082766849'><font color='#'>session</font></a> execpt those
 specified in <b>l</b>.</p><a name='1082853393'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082766849'>Session</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Wcl method</i></td>
	</tr></table><h3>session_clean_but(<font color='green'>i</font><font color='blue'>:</font>string)<font color='blue'> -&gt; </font>any</h3><p align='justify' class='doc_paragraph'> session_clean_but(<b>i</b>) removes all datas from a <a href='#1082766849'><font color='#'>session</font></a> execpt <b>i</b>.</p><a name='1082852433'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082766849'>Session</a></i></td><td width='20%' align='center'><i>inline</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Wcl method</i></td>
	</tr></table><h3>session_cookie()<font color='blue'> =&gt; </font>void</h3><p align='justify' class='doc_paragraph'> session_cookie() starts a <a href='#1082766849'><font color='#'>session</font></a>. The ID of the <a href='#1082766849'><font color='#'>session</font></a> is transmitted in
 a cookie. The client should support and allow cookies. If a <a href='#1082766849'><font color='#'>session</font></a> with a
 matching ID already exists then its data are loaded in memory.</p><a name='1082852913'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082766849'>Session</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Wcl method</i></td>
	</tr></table><h3>session_destroy()<font color='blue'> -&gt; </font>void</h3><p align='justify' class='doc_paragraph'> session_destroy() detroys an existing <a href='#1082766849'><font color='#'>session</font></a>. If the associated file that
 contain <a href='#1082766849'><font color='#'>session</font></a> datas then it is unlinked.</p><a name='1082773281'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082766849'>Session</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Wcl method</i></td>
	</tr></table><h3>session_url()<font color='blue'> -&gt; </font>void</h3><p align='justify' class='doc_paragraph'> session_url() starts a client <a href='#1082766849'><font color='#'>session</font></a>. Unlike session-cookie(), session_url()
 transmit the <a href='#1082766849'><font color='#'>session</font></a> ID (which identifies the client) on the URL. It is a more
 portable way than <a href='#1082852433'><font color='#'>session_cookie</font></a> since it does not require that the client
 allows cookies. If a <a href='#1082766849'><font color='#'>session</font></a> with a matching ID already exists then its data
 are loaded in memory.</p><a name='1082853921'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082766849'>Session</a></i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Wcl method</i></td>
	</tr></table><h3>unregister(<font color='green'>self</font><font color='blue'>:</font>string)<font color='blue'> -&gt; </font>void</h3><p align='justify' class='doc_paragraph'> unregister(<b>self</b>) remove the entry <b>self</b> from the current <a href='#1082766849'><font color='#'>session</font></a>.</p></body>
	</html>