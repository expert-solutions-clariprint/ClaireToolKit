<html>
	<head>
		<title>
			Db documentation
		</title>
		<style>
body
{
        font-size: 12px;
        font-family: arial, Helvetica;
        text-transform: inherit;
}


h1 { font-size: 25px; }

h2 { font-size: 20px; }

a[href]
{
	border-bottom: 1px dotted grey;
	text-decoration: none
}

.doc_paragraph
{
        font-size: 12px;
        font-family: arial, helvetica;
}

.item_header { font-size: 10px; page-break-before: avoid; page-break-inside: avoid; page-break-after: avoid }

.doc_code
{
        text-transform: inherit;
        font-size: 11px;
        font-family: monaco, courier, mono-space;
}
		</style>
		<link rel="stylesheet" type="text/css" href="doc.css" media="all">
	</head>
	<body>
	<h1>Db v1.0.0  documentation</h1><p><i>Documentation generated by XL CLAIRE v3.3.37 at Fri, 17 Nov 2006</i></p><ul>
				<li><b>Author :</b> Sylvain BENILAN</li>
						</ul>
				<h1><a name='__category_index__'>Category index</a></h1>
		<ol><li><a href='#1082379041'>Connection, driver module</a>
</li>
			<li><a href='#1082442673'>Catalog methods</a>
</li>
			<li><a href='#1082448289'>Executing queries</a>
</li>
			<li><a href='#1082465697'>Reading result sets</a>
</li>
			<li><a href='#1082478465'>Transaction</a>
</li>
			<li><a href='#1082484625'>Disconnection</a>
</li>
			</ol>
		<h1><a name='__method_index__'>Method index</a></h1>
		<ul><li><font font-face='Courier' class='doc_code'><a href='#1082478577'>beginTransaction</a>
(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>void
	</font></li>
			<li><font font-face='Courier' class='doc_code'><a href='#1082448209'>columns</a>
(<font color='green'>self</font><font color='blue'>:</font>Database, <font color='green'>t_</font><font color='blue'>:</font>string)<font color='blue'> -&gt; </font>list[Column]
	</font></li>
			<li><font font-face='Courier' class='doc_code'><a href='#1082483921'>commitTransaction</a>
(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>void
	</font></li>
			<li><font font-face='Courier' class='doc_code'><a href='#1082484913'>disconnect</a>
(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>void
	</font></li>
			<li><font font-face='Courier' class='doc_code'><a href='#1082465521'>endOfQuery</a>
(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>integer
	</font></li>
			<li><font font-face='Courier' class='doc_code'><a href='#1082448849'>execute</a>
(<font color='green'>self</font><font color='blue'>:</font>Db/Database, <font color='green'>sql</font><font color='blue'>:</font>string)<font color='blue'> -&gt; </font>integer
	</font></li>
			<li><font font-face='Courier' class='doc_code'><a href='#1082467217'>fetch</a>
(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>boolean
	</font></li>
			<li><font font-face='Courier' class='doc_code'><a href='#1082477041'>field</a>
(<font color='green'>self</font><font color='blue'>:</font>Database, <font color='green'>fieldName</font><font color='blue'>:</font>string)<font color='blue'> -&gt; </font>(string U port) U {unknown}
	</font></li>
			<li><font font-face='Courier' class='doc_code'><a href='#1082478129'>field</a>
(<font color='green'>self</font><font color='blue'>:</font>Database, <font color='green'>f</font><font color='blue'>:</font>integer)<font color='blue'> -&gt; </font>(string U port) U {unknown}
	</font></li>
			<li><font font-face='Courier' class='doc_code'><a href='#1082478369'>fields</a>
(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>list[string]
	</font></li>
			<li><font font-face='Courier' class='doc_code'><a href='#1082465473'>printInQuery</a>
(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>port
	</font></li>
			<li><font font-face='Courier' class='doc_code'><a href='#1082484401'>rollbackTransaction</a>
(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>void
	</font></li>
			<li><font font-face='Courier' class='doc_code'><a href='#1082476993'>row</a>
(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>list[(string U port) U {unknown}]
	</font></li>
			<li><font font-face='Courier' class='doc_code'><a href='#1082448145'>tables</a>
(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>list[string]
	</font></li>
			</ul>
		<hr style='page-break-before: always; page-break-after: avoid' />
			<h1>Db categories</h1>
		<a name='1082379041'><hr style='page-break-before: always' /></a>
		<table width='100%' class='item_header'>
		<tr>
			<td width='33%' align='left' valign='bottom'><i></i></td>
			<td width='33%' align='center' valign='top'><i><a href='#__category_index__'>categories</a><br/>Connection, driver module
				</i></td>
			<td width='33%' align='right' valign='bottom'><i></i></td>
		</tr>
	</table>
	<h2>Connection, driver module</h2>
	<ul></ul><p align='justify' class='doc_paragraph'> The module Db implements a general purpose Database engine for CLAIRE.
 It defines a set of API that should be implemented by a database driver
 module like Mysql. It is up to the driver to provide a connection method
 that creates an instance of the Database class used by all method of the
 Db module. For instance Mysql provides the following constructor :
 <font size='2' face='Courier'>
										<table align=center width='85%' class='doc_code'>
										<tr><td font-face='Courier'><br/>&nbsp;<font color='black'>DB</font>&nbsp;<font color=blue>:</font><font color=blue>:</font>&nbsp;<font color='black'>Mysql</font>/<font color='black'>mySql!</font>(<font color='#993333'>"database name"</font>,&nbsp;<font color='#993333'>"host address"</font>,&nbsp;<font color='#993333'>"user"</font>,&nbsp;<font color='#993333'>"password"</font>)<br/>&nbsp;<br/></td></tr></table></font></p><a name='1082442673'><hr style='page-break-before: always' /></a>
		<table width='100%' class='item_header'>
		<tr>
			<td width='33%' align='left' valign='bottom'><i></i></td>
			<td width='33%' align='center' valign='top'><i><a href='#__category_index__'>categories</a><br/>Catalog methods
				</i></td>
			<td width='33%' align='right' valign='bottom'><i></i></td>
		</tr>
	</table>
	<h2>Catalog methods</h2>
	<ul><li><font font-face='Courier' class='doc_code'><a href='#1082448209'>columns</a>
(<font color='green'>self</font><font color='blue'>:</font>Database, <font color='green'>t_</font><font color='blue'>:</font>string)<font color='blue'> -&gt; </font>list[Column]
	</font></li><li><font font-face='Courier' class='doc_code'><a href='#1082448145'>tables</a>
(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>list[string]
	</font></li></ul><p align='justify' class='doc_paragraph'> Db provides two special methods to get informations about the database structure.
 The first one (<a href='#1082448145'><font color='#'>tables</font></a> @ Database) retrieves the list of table names :
 <font size='2' face='Courier'>
										<table align=center width='85%' class='doc_code'>
										<tr><td font-face='Courier'><br/>&nbsp;<font color='black'>show_db_tables</font>(<font color='black'>self</font><font color=blue>:</font><font color='black'>Db</font>/<font color='#339966'>Database</font>)&nbsp;<font color=blue>:</font>&nbsp;<font color='#339966'>void</font>&nbsp;<font color='#0000CC'>-&gt;</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><font color='#0000CC'>printf</font></b>(<font color='#993333'>"~S tables :\n~I"</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color='black'>self</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><font color='#0000CC'>for</font></b>&nbsp;<font color='black'>t</font>&nbsp;<b><font color='#0000CC'>in</font></b>&nbsp;<font color='black'>Db</font>/<a href='#1082448145'><font color='#666633'>tables</font></a>(<font color='black'>self</font>)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><font color='#0000CC'>printf</font></b>(<font color='#993333'>"~A\n"</font>,&nbsp;<font color='black'>t</font>))<br/>&nbsp;<br/></td></tr></table></font> The second one (<a href='#1082448209'><font color='#'>columns</font></a>) is use to retrieve <a href='#1082448209'><font color='#'>columns</font></a> of a given table :
 <font size='2' face='Courier'>
										<table align=center width='85%' class='doc_code'>
										<tr><td font-face='Courier'><br/>&nbsp;<font color='black'>show_table_columns</font>(<font color='black'>self</font><font color=blue>:</font><font color='black'>Db</font>/<font color='#339966'>Database</font>,&nbsp;<font color='black'>tab</font><font color=blue>:</font><font color='#339966'>string</font>)&nbsp;<font color=blue>:</font>&nbsp;<font color='#339966'>void</font>&nbsp;<font color='#0000CC'>-&gt;</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><font color='#0000CC'>printf</font></b>(<font color='#993333'>"~S, columns of table ~A :\n~I"</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color='black'>self</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color='black'>tab</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><font color='#0000CC'>for</font></b>&nbsp;<font color='black'>c</font>&nbsp;<b><font color='#0000CC'>in</font></b>&nbsp;<font color='black'>Db</font>/<a href='#1082448209'><font color='#666633'>columns</font></a>(<font color='black'>tab</font>)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><font color='#0000CC'>printf</font></b>(<font color='#993333'>"column ~A: nullable: ~S, SQL type: ~A\n"</font>,<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color='black'>c</font><font color=blue>.</font><font color='#666633'>name</font>,&nbsp;<font color='black'>c</font><font color=blue>.</font><font color='black'>Db</font>/<font color='#666633'>nullable?</font>,&nbsp;<font color='black'>c</font><font color=blue>.</font><font color='black'>Db</font>/<font color='#666633'>sqlTypeName</font>))<br/>&nbsp;<br/></td></tr></table></font></p><a name='1082448289'><hr style='page-break-before: always' /></a>
		<table width='100%' class='item_header'>
		<tr>
			<td width='33%' align='left' valign='bottom'><i></i></td>
			<td width='33%' align='center' valign='top'><i><a href='#__category_index__'>categories</a><br/>Executing queries
				</i></td>
			<td width='33%' align='right' valign='bottom'><i></i></td>
		</tr>
	</table>
	<h2>Executing queries</h2>
	<ul><li><font font-face='Courier' class='doc_code'><a href='#1082465521'>endOfQuery</a>
(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>integer
	</font></li><li><font font-face='Courier' class='doc_code'><a href='#1082448849'>execute</a>
(<font color='green'>self</font><font color='blue'>:</font>Db/Database, <font color='green'>sql</font><font color='blue'>:</font>string)<font color='blue'> -&gt; </font>integer
	</font></li><li><font font-face='Courier' class='doc_code'><a href='#1082465473'>printInQuery</a>
(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>port
	</font></li></ul><p align='justify' class='doc_paragraph'> The <a href='#1082448849'><font color='#'>execute</font></a> method allow submition of direct SQL queries in a simple way, for instance :
 <font size='2' face='Courier'>
										<table align=center width='85%' class='doc_code'>
										<tr><td font-face='Courier'><br/>&nbsp;<font color='black'>Db</font>/<a href='#1082448849'><font color='#666633'>execute</font></a>(<font color='black'>DB</font>,&nbsp;<font color='#993333'>"SELECT * FORM my_table"</font>)<br/>&nbsp;<font color='black'>Db</font>/<a href='#1082448849'><font color='#666633'>execute</font></a>(<font color='black'>DB</font>,&nbsp;<font color='#993333'>"INSERT ..."</font>)<br/>&nbsp;<br/></td></tr></table></font> Oftenly we need to build the SQL statement dynamicaly. Db comes with an SQL redirection
 facility, the current output can be localy redirected to the statement of a query as in :
 <font size='2' face='Courier'>
										<table align=center width='85%' class='doc_code'>
										<tr><td font-face='Courier'><br/>&nbsp;(<font color='black'>Db</font>/<a href='#1082465473'><font color='#666633'>printInQuery</font></a>(<font color='black'>DB</font>),&nbsp;<font color='#FF9900'>// starts a new redirected query</font><br/>&nbsp;<b><font color='#0000CC'>printf</font></b>(<font color='#993333'>"UPDATE ~A ..."</font>,&nbsp;<font color=blue>.</font><font color=blue>.</font><font color=blue>.</font>)&nbsp;<font color='#FF9900'>// print the SQL statement dynamicaly</font><br/>&nbsp;<b><font color='#0000CC'>let</font></b>&nbsp;<font color='black'>affected_rows</font>&nbsp;<font color=blue>:</font><font color='#666633'>=</font>&nbsp;<font color='black'>Db</font>/<a href='#1082465521'><font color='#666633'>endOfQuery</font></a>(<font color='black'>DB</font>)&nbsp;&nbsp;<font color='#FF9900'>// ends redirection and execute query</font><br/>&nbsp;<b><font color='#0000CC'>in</font></b>&nbsp;<font color=blue>.</font><font color=blue>.</font><font color=blue>.</font>)<br/><br/>&nbsp;(<font color='black'>Db</font>/<a href='#1082465473'><font color='#666633'>printInQuery</font></a>(<font color='black'>DB</font>),&nbsp;<font color='#FF9900'>// starts a new redirected query</font><br/>&nbsp;<b><font color='#0000CC'>printf</font></b>(<font color='#993333'>"SELECT ~A ..."</font>,&nbsp;<font color=blue>.</font><font color=blue>.</font><font color=blue>.</font>)&nbsp;<font color='#FF9900'>// print the SQL statement dynamicaly</font><br/>&nbsp;<b><font color='#0000CC'>assert</font></b>(<font color='black'>Db</font>/<a href='#1082465521'><font color='#666633'>endOfQuery</font></a>(<font color='black'>DB</font>)&nbsp;<font color='#666633'>=</font>&nbsp;<font color='black'>-1</font>)&nbsp;<font color='#FF9900'>// ends redirection and execute query</font><br/>&nbsp;<br/></td></tr></table></font> <a href='#1082465521'><font color='#'>endOfQuery</font></a> returns the same status code than <a href='#1082448849'><font color='#'>execute</font></a> which would be -1 for a SELECT statement
 and the amount of affected rows otherwise. In the case of a SELECT statement we may omit the call
 to <a href='#1082465521'><font color='#'>endOfQuery</font></a>, indeed we would always use <a href='#1082467217'><font color='#'>fetch</font></a> for SELECT statement in order to retrieve a
 <a href='#1082476993'><font color='#'>row</font></a> of the result set. The first <a href='#1082467217'><font color='#'>fetch</font></a> call would automaticaly ends the rediretion and <a href='#1082448849'><font color='#'>execute</font></a>
 the query if it hasn't be done with <a href='#1082465521'><font color='#'>endOfQuery</font></a>, so we could write :
 <font size='2' face='Courier'>
										<table align=center width='85%' class='doc_code'>
										<tr><td font-face='Courier'><br/>&nbsp;(<font color='black'>Db</font>/<a href='#1082465473'><font color='#666633'>printInQuery</font></a>(<font color='black'>DB</font>),<br/>&nbsp;<b><font color='#0000CC'>printf</font></b>(<font color='#993333'>"SELECT ~A ..."</font>,&nbsp;<font color=blue>.</font><font color=blue>.</font><font color=blue>.</font>)<br/>&nbsp;<b><font color='#0000CC'>while</font></b>&nbsp;<font color='black'>Db</font>/<a href='#1082467217'><font color='#666633'>fetch</font></a>(<font color='black'>DB</font>)&nbsp;<font color='#FF9900'>// the first fetch ends redirection and executes the query</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color=blue>.</font><font color=blue>.</font><font color=blue>.</font>&nbsp;)<br/>&nbsp;<br/></td></tr></table></font></p><a name='1082465697'><hr style='page-break-before: always' /></a>
		<table width='100%' class='item_header'>
		<tr>
			<td width='33%' align='left' valign='bottom'><i></i></td>
			<td width='33%' align='center' valign='top'><i><a href='#__category_index__'>categories</a><br/>Reading result sets
				</i></td>
			<td width='33%' align='right' valign='bottom'><i></i></td>
		</tr>
	</table>
	<h2>Reading result sets</h2>
	<ul><li><font font-face='Courier' class='doc_code'><a href='#1082467217'>fetch</a>
(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>boolean
	</font></li><li><font font-face='Courier' class='doc_code'><a href='#1082477041'>field</a>
(<font color='green'>self</font><font color='blue'>:</font>Database, <font color='green'>fieldName</font><font color='blue'>:</font>string)<font color='blue'> -&gt; </font>(string U port) U {unknown}
	</font></li><li><font font-face='Courier' class='doc_code'><a href='#1082478129'>field</a>
(<font color='green'>self</font><font color='blue'>:</font>Database, <font color='green'>f</font><font color='blue'>:</font>integer)<font color='blue'> -&gt; </font>(string U port) U {unknown}
	</font></li><li><font font-face='Courier' class='doc_code'><a href='#1082478369'>fields</a>
(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>list[string]
	</font></li><li><font font-face='Courier' class='doc_code'><a href='#1082476993'>row</a>
(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>list[(string U port) U {unknown}]
	</font></li></ul><p align='justify' class='doc_paragraph'> When a SELECT statement is executed a result set can be iterated. A result set is made
 of <a href='#1082476993'><font color='#'>row</font></a> results and each <a href='#1082476993'><font color='#'>row</font></a> is made of <a href='#1082478369'><font color='#'>fields</font></a>. Rows are loaded one at a time with a call
 to <a href='#1082467217'><font color='#'>fetch</font></a>. <a href='#1082467217'><font color='#'>fetch</font></a> should be called repeatedly until false is returned which would mean that
 the result set has been loaded entirely and that the query has been deleted. For instance
 the following method prints the content of a table :
 <font size='2' face='Courier'>
										<table align=center width='85%' class='doc_code'>
										<tr><td font-face='Courier'><br/>&nbsp;<font color='black'>show_table_content</font>(<font color='black'>self</font><font color=blue>:</font><font color='black'>Db</font>/<font color='#339966'>Database</font>,&nbsp;<font color='black'>tab</font><font color=blue>:</font><font color='#339966'>string</font>)&nbsp;<font color=blue>:</font>&nbsp;<font color='#339966'>void</font>&nbsp;<font color='#0000CC'>-&gt;</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<font color='black'>Db</font>/<a href='#1082465473'><font color='#666633'>printInQuery</font></a>(<font color='black'>self</font>),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><font color='#0000CC'>printf</font></b>(<font color='#993333'>"SELECT * FROM ~A"</font>,&nbsp;<font color='black'>tab</font>),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><font color='#0000CC'>while</font></b>&nbsp;<font color='black'>Db</font>/<a href='#1082467217'><font color='#666633'>fetch</font></a>(<font color='black'>self</font>)&nbsp;<font color='#FF9900'>// iterate the result set</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><font color='#0000CC'>printf</font></b>(<font color='#993333'>"~A\n"</font>,&nbsp;<font color='black'>Db</font>/<a href='#1082476993'><font color='#666633'>row</font></a>(<font color='black'>self</font>)))&nbsp;<font color='#FF9900'>// and print each rows</font><br/>&nbsp;<br/></td></tr></table></font> Where <a href='#1082476993'><font color='#'>row</font></a>(self) return the list of <a href='#1082478129'><font color='#'>field</font></a> values of the current fetched <a href='#1082476993'><font color='#'>row</font></a>. It is sometimes
 necessary to have a <a href='#1082478129'><font color='#'>field</font></a> access by its name, for instance when we use database procedures :
 <font size='2' face='Courier'>
										<table align=center width='85%' class='doc_code'>
										<tr><td font-face='Courier'><br/>&nbsp;(<font color='black'>Db</font>/<a href='#1082448849'><font color='#666633'>execute</font></a>(<font color='black'>DB</font>,&nbsp;<font color='#993333'>"SELECT Count(*) AS my_field FROM my_table"</font>),<br/>&nbsp;<b><font color='#0000CC'>while</font></b>&nbsp;<font color='black'>Db</font>/<a href='#1082467217'><font color='#666633'>fetch</font></a>(<font color='black'>DB</font>)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><font color='#0000CC'>let</font></b>&nbsp;<font color='black'>count</font>&nbsp;<font color=blue>:</font><font color='#666633'>=</font>&nbsp;<font color='black'>Db</font>/<a href='#1082478129'><font color='#666633'>field</font></a>(<font color='black'>DB</font>,&nbsp;<font color='#993333'>"my_field"</font>)<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b><font color='#0000CC'>in</font></b>&nbsp;<font color=blue>.</font><font color=blue>.</font><font color=blue>.</font><br/>&nbsp;<br/></td></tr></table></font> Here we use the SQL AS keyword that binds the count <a href='#1082478129'><font color='#'>field</font></a> to a specify name. The use of the AS
 keyword is a good practice since it makes database code more portable from a database to another.</p><a name='1082478465'><hr style='page-break-before: always' /></a>
		<table width='100%' class='item_header'>
		<tr>
			<td width='33%' align='left' valign='bottom'><i></i></td>
			<td width='33%' align='center' valign='top'><i><a href='#__category_index__'>categories</a><br/>Transaction
				</i></td>
			<td width='33%' align='right' valign='bottom'><i></i></td>
		</tr>
	</table>
	<h2>Transaction</h2>
	<ul><li><font font-face='Courier' class='doc_code'><a href='#1082478577'>beginTransaction</a>
(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>void
	</font></li><li><font font-face='Courier' class='doc_code'><a href='#1082483921'>commitTransaction</a>
(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>void
	</font></li><li><font font-face='Courier' class='doc_code'><a href='#1082484401'>rollbackTransaction</a>
(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>void
	</font></li></ul><p align='justify' class='doc_paragraph'> Usualy, a user code that connects to a database make multiple queries. The major
 problem comes when the connected application reaches an undefined behavior while
 it has already submited queries that have modified the database integrity. To solve
 this kind of problem an application should perform queries inside a <a href='#1082478465'><font color='#'>transaction</font></a> that
 would commit all modification at one time or abort all queries of the <a href='#1082478465'><font color='#'>transaction</font></a>
 in case of undefined behavior :
 <font size='2' face='Courier'>
										<table align=center width='85%' class='doc_code'>
										<tr><td font-face='Courier'><br/>&nbsp;<b><font color='#0000CC'>try</font></b><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<font color='black'>Db</font>/<a href='#1082478577'><font color='#666633'>beginTransaction</font></a>(<font color='black'>DB</font>),<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color=blue>.</font><font color=blue>.</font><font color=blue>.</font>&nbsp;<font color='#FF9900'>// some code that submit multiple queries</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color='black'>Db</font>/<a href='#1082483921'><font color='#666633'>commitTransaction</font></a>(<font color='black'>DB</font>))&nbsp;<font color='#FF9900'>// OK, commit all the queries of the transaction</font><br/>&nbsp;<b><font color='#0000CC'>catch</font></b>&nbsp;<font color='#339966'>any</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color='black'>Db</font>/<a href='#1082484401'><font color='#666633'>rollbackTransaction</font></a>(<font color='black'>DB</font>)&nbsp;<font color='#FF9900'>// ignore all queries that have been performed</font><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font color='#FF9900'>// during the transaction</font><br/>&nbsp;<br/></td></tr></table></font></p><a name='1082484625'><hr style='page-break-before: always' /></a>
		<table width='100%' class='item_header'>
		<tr>
			<td width='33%' align='left' valign='bottom'><i></i></td>
			<td width='33%' align='center' valign='top'><i><a href='#__category_index__'>categories</a><br/>Disconnection
				</i></td>
			<td width='33%' align='right' valign='bottom'><i></i></td>
		</tr>
	</table>
	<h2>Disconnection</h2>
	<ul><li><font font-face='Courier' class='doc_code'><a href='#1082484913'>disconnect</a>
(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>void
	</font></li></ul><p align='justify' class='doc_paragraph'> When we are done with the database we have to <a href='#1082484913'><font color='#'>disconnect</font></a> from it :
 <font size='2' face='Courier'>
										<table align=center width='85%' class='doc_code'>
										<tr><td font-face='Courier'><br/>&nbsp;<font color='black'>Db</font>/<a href='#1082484913'><font color='#666633'>disconnect</font></a>(<font color='black'>DB</font>)<br/>&nbsp;<br/></td></tr></table></font></p><hr style='page-break-before: always; page-break-after: avoid' />
			<h1>Db methods</h1>
		<a name='1082478577'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082478465'>Transaction</a>
</i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Db method</i></td>
	</tr></table><h3>Db/beginTransaction(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>void
	</h3><p align='justify' class='doc_paragraph'> <a href='#1082478577'><font color='#'>beginTransaction</font></a>(<b>self</b>) starts a new <a href='#1082478465'><font color='#'>transaction</font></a> with the database. All queries
 that are executed during the <a href='#1082478465'><font color='#'>transaction</font></a> are not actualy commited in the
 database. A <a href='#1082478465'><font color='#'>transaction</font></a> ends whe commitTreansaction(<b>self</b>) is called which would
 commit all queries in a definitive way whereas <a href='#1082484401'><font color='#'>rollbackTransaction</font></a>(<b>self</b>) would
 left the database unchanged in addition to end the <a href='#1082478465'><font color='#'>transaction</font></a>.</p><a name='1082448209'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082442673'>Catalog methods</a>
</i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Db method</i></td>
	</tr></table><h3>Db/columns(<font color='green'>self</font><font color='blue'>:</font>Database, <font color='green'>t_</font><font color='blue'>:</font>string)<font color='blue'> -&gt; </font>list[Column]
	</h3><p align='justify' class='doc_paragraph'> columns(<b>self</b>) returns a list of column objects for a given table of the given database.</p><a name='1082483921'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082478465'>Transaction</a>
</i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Db method</i></td>
	</tr></table><h3>Db/commitTransaction(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>void
	</h3><p align='justify' class='doc_paragraph'> <a href='#1082483921'><font color='#'>commitTransaction</font></a>(<b>self</b>) commits all queries that have been executed since
 the call to <a href='#1082478577'><font color='#'>beginTransaction</font></a>(<b>self</b>) and ends the current <a href='#1082478465'><font color='#'>transaction</font></a>.</p><a name='1082484913'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082484625'>Disconnection</a>
</i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Db method</i></td>
	</tr></table><h3>Db/disconnect(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>void
	</h3><p align='justify' class='doc_paragraph'> disconnect(<b>self</b>) disconnects the database and cleanup all pending queries.</p><a name='1082465521'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082448289'>Executing queries</a>
</i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Db method</i></td>
	</tr></table><h3>Db/endOfQuery(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>integer
	</h3><p align='justify' class='doc_paragraph'> <a href='#1082465521'><font color='#'>endOfQuery</font></a>(<b>self</b>) executes the SQL query started by <a href='#1082465473'><font color='#'>printInQuery</font></a>(<b>self</b>) the
 return integer status has the same meaning as <a href='#1082448849'><font color='#'>execute</font></a>(<b>self</b>, sql)</p><a name='1082448849'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082448289'>Executing queries</a>
</i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Core method</i></td>
	</tr></table><h3>execute(<font color='green'>self</font><font color='blue'>:</font>Db/Database, <font color='green'>sql</font><font color='blue'>:</font>string)<font color='blue'> -&gt; </font>integer
	</h3><p align='justify' class='doc_paragraph'> execute(<b>self</b>, <b>sql</b>) execute a new query with the given <b>sql</b> statement (direct execution) and return
 an integer status whith the following meaning :
 <ul> <li>-1 means that a result set is available (SELECT statements). You'll have to use <a href='#1082467217'><font color='#'>fetch</font></a>, <a href='#1082478129'><font color='#'>field</font></a> and <a href='#1082476993'><font color='#'>row</font></a>
 API to explore te result set.
 <li>a positive integer that represents the number affected rows (othe statements : INSERT, UPDATE, DELETE ...).
 </ul></p><a name='1082467217'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082465697'>Reading result sets</a>
</i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Db method</i></td>
	</tr></table><h3>Db/fetch(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>boolean
	</h3><p align='justify' class='doc_paragraph'> fetch(<b>self</b>) loads a new <a href='#1082476993'><font color='#'>row</font></a> (if any) from the result set of the current executed query.
 fetch must be used after the execution of a SELECT statement (for which <a href='#1082448849'><font color='#'>execute</font></a> or <a href='#1082465521'><font color='#'>endOfQuery</font></a>
 returns -1). fetch returns true if a <a href='#1082476993'><font color='#'>row</font></a> could actuly be loaded, othewise false is returned
 and the current query is deleted.</p><a name='1082478129'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082465697'>Reading result sets</a>
</i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Db method</i></td>
	</tr></table><h3>Db/field(<font color='green'>self</font><font color='blue'>:</font>Database, <font color='green'>f</font><font color='blue'>:</font>integer)<font color='blue'> -&gt; </font>(string U port) U {unknown}
	</h3><p align='justify' class='doc_paragraph'> field(<b>self</b>, <b>f</b>) returns from the current fetched <a href='#1082476993'><font color='#'>row</font></a> the value associated with the field
 with index <b>f</b> in the SQL query.</p><a name='1082477041'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082465697'>Reading result sets</a>
</i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Db method</i></td>
	</tr></table><h3>Db/field(<font color='green'>self</font><font color='blue'>:</font>Database, <font color='green'>fieldName</font><font color='blue'>:</font>string)<font color='blue'> -&gt; </font>(string U port) U {unknown}
	</h3><p align='justify' class='doc_paragraph'> field(<b>self</b>, <b>fieldName</b>) returns from the current fetched <a href='#1082476993'><font color='#'>row</font></a> the value associated with the field
 with named <b>fieldName</b> in the SQL query.</p><a name='1082478369'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082465697'>Reading result sets</a>
</i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Db method</i></td>
	</tr></table><h3>Db/fields(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>list[string]
	</h3><p align='justify' class='doc_paragraph'> fields(<b>self</b>) return the list of names associated with the current query in the same
 way to <a href='#1082476993'><font color='#'>row</font></a>(<b>self</b>) that returns their corresponding value in the current fetched <a href='#1082476993'><font color='#'>row</font></a>.</p><a name='1082465473'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082448289'>Executing queries</a>
</i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Db method</i></td>
	</tr></table><h3>Db/printInQuery(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>port
	</h3><p align='justify' class='doc_paragraph'> <a href='#1082465473'><font color='#'>printInQuery</font></a>(<b>self</b>) redirect the current output port to new SQL query. Any printing
 operation will then be redirected to the query (an SQL statement is expected) until
 a call to <a href='#1082465521'><font color='#'>endOfQuery</font></a>(<b>self</b>) appends.</p><a name='1082484401'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082478465'>Transaction</a>
</i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Db method</i></td>
	</tr></table><h3>Db/rollbackTransaction(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>void
	</h3><p align='justify' class='doc_paragraph'> <a href='#1082484401'><font color='#'>rollbackTransaction</font></a>(<b>self</b>) cancel all queries that have been executed since
 the call to <a href='#1082478577'><font color='#'>beginTransaction</font></a>(<b>self</b>) and ends the current <a href='#1082478465'><font color='#'>transaction</font></a>.</p><a name='1082476993'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082465697'>Reading result sets</a>
</i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Db method</i></td>
	</tr></table><h3>Db/row(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>list[(string U port) U {unknown}]
	</h3><p align='justify' class='doc_paragraph'> row(<b>self</b>) returns the list of values associated with the current fetched row. The order
 of the list depends on how the query was written and may be system dependent.
 The returned list may contain :
 <ul> <li>the unknown value when the corresponding value is NULL in the database
 <li>a blob device when the corresponding value is a BLOB or LONGBINARY object in the database
 <li>else a string is returned, it up to the user code to apply integer! or float! conversions
 </ul></p><a name='1082448145'><hr style='page-break-after: avoid' /></a>
	<table width='100%' class='item_header'>
		<tr>
			<td width='20%' align='left'><i><a href='#__category_index__'>categories</a></i></td>
			<td width='20%' align='center'><i><a href='#1082442673'>Catalog methods</a>
</i></td><td width='20%' align='center'><i>normal dispatch</i></td>
	<td width='20%' align='center'><i></i></td><td width='20%' align='right'><i>Db method</i></td>
	</tr></table><h3>Db/tables(<font color='green'>self</font><font color='blue'>:</font>Database)<font color='blue'> -&gt; </font>list[string]
	</h3><p align='justify' class='doc_paragraph'> tables(<b>self</b>) returns the list of table names for the given database.</p></body>
	</html>